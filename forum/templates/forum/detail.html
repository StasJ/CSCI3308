{% extends 'base.html' %}
{% load humanize %}

{% block main %}
	{% if user == post.user %}
	<a id="edit-post" class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons">mode_edit</i></a>
	{% endif %}

	<div class="row">
		<div id="post" class="card clear-m">
			<div class="card-content">
				<span class="card-title">{{ post.title }}</span>
				<p>{{ post.content }}</p>
			</div>
			<div class="divider"></div>
			<div class="card-content">
				<div class="row clear">
					{% for tag in post.tags.all %}
					<div class="chip">{{ tag }}</div>
					{% endfor %}
					<span class="right grey-text">{{ post.author_name }} posted {{ post.pub_time | naturaltime }}</span>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="card">
			<div class="card-stacked">

				{% for comment in post.post_set.all %}
				<div id="comment-{{ comment.id }}" class="card-content">
					<div class="row">
						<b class="grey-text text-darken-3">{{ comment.author_name }}</b>
						<span class="right grey-text">{{ comment.pub_time | naturaltime }}</span>
					</div>
					<p>{{ comment.content }}</p>
				</div>
				<div class="divider"></div>
				{% endfor %}

				<div class="card-content">
					<form id="new-reply" method="post">
						{% csrf_token %}
						<div class="row clear">
							<div class="input-field col s12" style="margin: 0;">
								<!--<textarea id="new-reply-area" class="materialize-textarea" name="" cols="30" rows="10"></textarea>-->
								{{ form.content }}
								{{ form.content.label_tag }}
							</div>
						</div>
						<div class="row clear hide" style="margin-top: 8px;">
							<button class="btn waves-effect waves-light" type="submit" name="action">
								Submit <i class="material-icons right">send</i>
							</button>
							<label class="right" style="margin-top: 8px;">
								<input type="checkbox" class="filled-in" />
								<span>Anonymous</span>
							</label>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
{% endblock %}


{% block document_ready %}
$('#{{ form.content.id_for_label }}').focus(function () {
	$('form#new-reply .hide').removeClass('hide');
	console.log('FOCUS');
});
{% endblock %}
